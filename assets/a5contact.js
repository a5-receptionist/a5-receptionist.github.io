var grecaptchaModel={corrected:!1,init:function(){if(grecaptchaModel.corrected=!1,"undefined"!=typeof grecaptcha){var e=grecaptcha.getResponse();grecaptchaModel.corrected=e.length>0}},correctCallback:function(){grecaptchaModel.corrected=!0,grecaptchaModel.onCorrectCaptcha()},onCorrectCaptcha:function(){}};reCaptchaCorrectCallback=function(){grecaptchaModel.correctCallback()},$(function(){"use strict";function e(){if(location.hash.length>0)return void(location.href=d);if(s){var e={callbacks:{signInSuccess:function(e){return handleSignedInUser(e),!1}},signInSuccessUrl:d,signInFlow:"popup",signInOptions:[{provider:firebase.auth.GoogleAuthProvider.PROVIDER_ID,scopes:["https://www.googleapis.com/auth/plus.login"]},{provider:firebase.auth.FacebookAuthProvider.PROVIDER_ID,scopes:["public_profile","email","user_friends"]},firebase.auth.TwitterAuthProvider.PROVIDER_ID,firebase.auth.GithubAuthProvider.PROVIDER_ID,firebase.auth.EmailAuthProvider.PROVIDER_ID],tosUrl:d},r=new firebaseui.auth.AuthUI(firebase.auth());r.start("#firebaseui-auth-container",e)}f.on("click",n),$(window).on("popstate",i),t(),a()}function t(){var e=$(".input_container form");$.extend($.validator.messages,{required:"\u5fc5\u9808\u9805\u76ee\u3067\u3059",email:"\u6b63\u3057\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),e.validate({rules:{type:{required:!0},name:{required:!0},kana:{required:!0},tel:{required:!0},email:{required:!0,email:!0},content:{required:!0},agree:{required:!0},domain:{required:!0,mysite:!0}},messages:{agree:{required:"\u3054\u540c\u610f\u304a\u9858\u3044\u3057\u307e\u3059"}},errorPlacement:function(e,t){if("type"==t.attr("name")){var a=$(t).closest("div");e.insertAfter(a)}else if("agree"==t.attr("name")){var a=$(t).closest("label");e.insertAfter(a)}else e.insertAfter(t)},onsubmit:!0,submitHandler:r})}function a(){grecaptchaModel.init(),f.prop("disabled",!grecaptchaModel.corrected)}function r(){return m={type:$('input[name="type"]:checked').val(),company:$("#company").length>0?$("#company").val():"",name:$("#name").val(),kana:$("#kana").val(),tel:$("#tel").val(),email:$("#email").val(),content:$("#content").val(),domain:document.domain,referrer:document.referrer},/\.altus5\./.test(document.domain)?($("#confirm_type").text(m.type),$("#confirm_company").text(m.company),$("#confirm_name").text(m.name),$("#confirm_kana").text(m.kana),$("#confirm_tel").text(m.tel),$("#confirm_email").text(m.email),$("#confirm_content").html(u(m.content)),c(".confirm_container"),o(".confirm_container"),void $("body,html").animate({scrollTop:0},0)):void console.log("altus5\u4ee5\u5916\u306e\u30c9\u30e1\u30a4\u30f3\u3067\u306f\u4f7f\u308f\u306a\u3044\u3067\u304f\u3060\u3055\u3044")}function n(){if(!grecaptchaModel.corrected)return!1;var e=m.email.replace(/[.]/g,"_"),t=moment(),a=t.format("YYYY-MM-DD-HH-mm-ss"),r=firebase.database(),n=r.ref("/contact/"+e+"/"+a);try{n.set(m)}catch(e){throw console.log(e),e}return c(".thanks_container"),o(".thanks_container"),$("body,html").animate({scrollTop:0},0),!1}function i(){var e=location.hash,t="";$.each(p,function(a,r){if(r.url==e)return t=r.id,!1});var a=l(t);o(a.id)}function c(e){var t=l(e);history.pushState(!0,t.title,d+t.url)}function o(e){""==e&&(e=".input_container");var t=l(e);$.each(p,function(e,a){a.id==t.id?$(a.id).show():$(a.id).hide()}),null!=t.initFunc&&t.initFunc()}function l(e){var t=null;return $.each(p,function(a,r){if(r.id==e)return t=r,!1}),null==t&&(t=p[0]),t}function u(e){var t=$("<p></p>");t.text(e);var a=t.html();return a.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />")}var s=!1,d=location.href.replace(/#.*/,""),f=($(".input_container form button"),$(".confirm_container form button")),p=[{id:".input_container",url:"#input",initFunc:t,title:"\u304a\u554f\u3044\u5408\u308f\u305b"},{id:".confirm_container",url:"#confirm",initFunc:a,title:"\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\u78ba\u8a8d"},{id:".thanks_container",url:"#thanks",initFunc:null,title:"\u304a\u554f\u3044\u5408\u308f\u305b\u627f\u308a\u307e\u3057\u305f"}],m={},h={apiKey:"AIzaSyDSf5IQpGTOY4ploswbC_hiRu3Ui5Oy0Z4",authDomain:"altus-five-contact-fa5bc.firebaseapp.com",databaseURL:"https://altus-five-contact-fa5bc.firebaseio.com",storageBucket:"altus-five-contact-fa5bc.appspot.com",messagingSenderId:"923242406897"};firebase.initializeApp(h),grecaptchaModel.onCorrectCaptcha=function(){f.prop("disabled",!grecaptchaModel.corrected)},e()});