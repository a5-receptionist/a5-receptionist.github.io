<!doctype html>
<html dir="ltr" lang="ja">
<head>
  <meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>ALTUS-FIVE | 並行処理時代を切り拓くActorモデル Akka</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta property="og:title" content="並行処理時代を切り拓くActorモデル Akka">
<meta property="og:type" content="website">
<meta property="og:url" content="/blog/akka/2016/11/08/akka-first/">
<meta property="og:description" content="">
<meta property="og:site_name" content="ALTUS-FIVE">
<meta property="og:image" content="/assets/ogp.png">

<meta name="twitter:card" content="summary">
<meta name="twitter:url" content="/blog/akka/2016/11/08/akka-first/">
<meta name="twitter:title" content="並行処理時代を切り拓くActorモデル Akka">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="/assets/ogp.png">

<link rel="apple-touch-icon" sizes="180x180" href="/assets/apple_touch_icon180x180.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/apple_touch_icon152x152.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/apple_touch_icon120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/apple_touch_icon76x76.png">

<link type="text/css" rel="stylesheet" href="/assets/common.css">

  <link type="text/css" rel="stylesheet" href="/assets/blog.css">
</head>
<body>
  <!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5WGNWC"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5WGNWC');</script>
<!-- End Google Tag Manager -->

  <!--[if lt IE 9]>
    <p class="browserupgrade">
      <strong>古い</strong>ブラウザがご使用されています。
      本サイトを快適に閲覧頂くために、<a href="http://browsehappy.com/">新しいブラウザにアップグレード</a>してください。
    </p>
  <![endif]-->

  <div id="low_page" class="wrap_all">
    <article id="blog" class="article">
      <h1 class="article__title w_const">並行処理時代を切り拓くActorモデル Akka</h1>
      <div class="article__conts w_const">
      <div id="date">2016-11-08</div>
        <div class="post">
        <h2 id="並行処理の弱点を解消するactorモデル">並行処理の弱点を解消するActorモデル</h2>
<p>並行処理が持つ「デッドロックが発生しうる」「スレッド管理が大変」といった弱点からエンジニアを解放すると言われているのがActorモデルです。<br />
Actorモデルはもともと、AIのためのアーキテクチャとして開発された数学的モデルです。<br />
その歴史は古く、1973年に最初の論文が登場しました。<br />
（参考： http://dl.acm.org/citation.cfm?id=1624804 ）<br />
モデルの構築にあたって、Actorモデルを動作させる並列コンピュータに幾つかの仮定を置いています：</p>

<blockquote>
  <ul>
    <li>数百・数千のマイクロプロセッサからなる</li>
    <li>個々にローカルメモリを持つ</li>
    <li>高性能通信ネットワークで通信を行う</li>
  </ul>
</blockquote>

<p>これらの仮定は、マルチコア環境が誕生し、大規模サービスの基盤として用いられるようになった昨今、現実のものになりつつあります。</p>

<h2 id="akkaのactorモデルを導入してコードを書いてみよう">AkkaのActorモデルを導入してコードを書いてみよう</h2>

<p>Akkaは、Actorモデルに基づいて並行処理が書ける、Java又はScalaで動作するライブラリです。<br />
以下に、Akkaの公式サイトに記述されているサンプルコードを示します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>import akka.actor.Actor
import akka.actor.Props
import akka.event.Logging
 
class MyActor extends Actor {
  val log = Logging(context.system, this)
 
  def receive = {
    case "test" =&gt; log.info("received test")
    case _      =&gt; log.info("received unknown message")
  }
}
</code></pre>
</div>
<p>(参考：http://doc.akka.io/docs/akka/snapshot/scala/actors.html)</p>

<p>サンプルコードでは、「MyActor」クラス、及び「receive」というメソッドを定義しています。<br />
Actorモデルのプログラミングにおいてはこのようなactorを複数生成し、相互にメッセージをやり取りすることで動作します。</p>

<ul>
  <li>それぞれのactorはメールボックスとアドレスを持つ</li>
  <li>actorの動作は非同期的（返答を待たずに次の処理に移る）</li>
</ul>

<p>上記のコードで定義したactorの仕事は、「test」というメッセージを受け取ったら「”received test”」という文字列、それ以外のメッセージを受け取ったら「”received unknown message”」という文字列をイベントストリームに流すというものです。<br />
メッセージの送り手となるactorをもう一人定義すれば、このプログラムを完全なものとして動作させることが出来ます。</p>

<h2 id="actorモデルでできること">Actorモデルでできること</h2>
<p>Actorモデルで構築されたシステムの有名な成功例は、スウェーデンの通信機器メーカー・エリクソン社の通信システムです。
これはIoTの事例としても興味深いものです。<br />
（参考：
https://www.ericsson.com/research-blog/internet-of-things/edge-computing-in-iot/）</p>

<p>このシステムはErlangという、アクターモデルをサポートした並行処理指向のプログラミング言語で記述されています。<br />
Akkaはもともと、Erlangに影響を受けて開発されました。
Akkaの強みとしては、子actorを定義しメッセージを一斉送信出来ることなどが挙げられます。
大規模な計算が必要なサービスに不可欠な並行計算の技術。まずはこんな形で触れてみてはいかがでしょうか。</p>

<h2 id="弊社の取り組み">弊社の取り組み</h2>
<p>弊社では、クローラーの開発と保守を行っています。<br />
最近は、Javascriptでレンダリングされるサイトも増えてきて、
httpcllientのような、シンプルにhtmlだけを取得するやり方では、
欲しい情報が取得できないケースも、少なくありません。<br />
そういう場合には、phantomjs などを使って、ブラウザでページをレンダリングさせることになりますが、
ブラウザなので負荷が高く、複数サーバーに分散する処理のところに、
Akka Actor を利用して、並列化の実装をしました。</p>


        </div>
      </div>
    </article>
  </div>

  <footer id="footer">
  <nav class="w_const">
    <div class="content01 cf">
      <div class="profile">
        <h1 class="foot_logo"><a href="/"><img src="/assets/logo_footer.png" alt="Altus-Five（アルタスファイブ）"></a></h1>
        <div class="address">
          <p class="paragraph">〒160-0022</p>
          <p class="paragraph">東京都新宿区新宿2-1-9 ステラ新宿5F</p>
          <p class="paragraph"><a href="tel:03-6904-5573">TEL：03-6904-5573</a></p>
        </div>
      </div>
      <ul class="links links01">
        <li class="link"><a href="/">TOP</a></li>
        <li class="link"><a href="/#introduction">アルタスファイブとは</a></li>
        <li class="link"><a href="/#feature">強み</a></li>
        <li class="link"><a href="/#service">サービス</a></li>
        <li class="link"><a href="/#performance">実績</a></li>
        <li class="link"><a href="/#example">開発事例</a></li>
        <li class="link"><a href="/blog/">ブログ</a></li>
      </ul>
      <ul class="links links02">
        <li class="link"><a href="/recruit/">採用情報</a></li>
        <li class="link"><a href="/company/">会社概要</a></li>
        <li class="link"><a href="/privacy/">個人情報保護方針</a></li>
        <li class="link"><a href="/contact/">お問い合わせ</a></li>
      </ul>
      <ul class="marks">
        <li class="mark"><img src="/assets/p_mark.png" alt=""></li>
      </ul>
    </div>
    <div id="copyright">© 2016 Altus-Five Co.,LTD. ALL RIGHTS RESERVED.</div>
  </nav>
</footer>

  <header id="header">
  <nav class="w_const cf">
    <h1 class="logo_head"><a href="/"><img src="/assets/logo_header.png" alt="Altus-Five（アルタスファイブ）"></a></h1>
    <ul class="links">
      <li class="link"><a href="/#introduction">アルタスファイブとは</a></li>
      <li class="link"><a href="/#feature">強み</a></li>
      <li class="link"><a href="/#service">サービス</a></li>
      <li class="link"><a href="/#performance">実績</a></li>
      <li class="link"><a href="/#example">開発事例</a></li>
      <li class="link"><a href="/blog/">ブログ</a></li>
      <li class="link"><a href="/recruit/">採用情報</a></li>
      <li class="link"><a href="/company/">会社概要</a></li>
      <li class="link link_contact"><a href="/contact/">お問い合わせ</a></li>
    </ul>
  </nav>
</header>

  <script type="text/javascript" src="/assets/vendor.js"></script>
<script type="text/javascript" src="/assets/common.js"></script>

  <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
